# ダイヤグラムによるプログラミング言語についての覚え書き

## どうして図形によるプログラミングか

プログラミング言語を使う際に壁になること(プログラミング言語でプログラミングを学習する場合につまづきやすいこと)として、
文法を覚えなければいけないということがあります。

プログラムを書くとき、まず文法を覚え、不十分な理解でアタマの中に「不完全な文法」ができあがります。
動かしてエラーになった際に文法の間違いを探すのは徒労感があります。
初心者がプログラミングをきらいになる理由のひとつです。

![文法を覚える大変さの概念図](./image/1st_step_of_programming.png "プログラミングの最初の難関 (文法を覚えること)")

これを避けるアプローチのひとつとして、文法を極力排除したプログラミング言語があると思います。

（略；執筆予定）

極力それら(文法的な約束事の数。覚えなければいけないこと)を排除して、ガイドされたプログラミングを実現すると、以下の特徴があると思います。
- たくさんコードを書くプログラム言語なら、そんなに意味がない。
- たまにしか使わないプログラム言語なら有効。

言い換えるとDSLの場合は、以下:
- 文法を理解したり、覚えたりすることのコスト
- 書いて違ってて実行時にエラーになり、モチベーションが削がれてしまう

が普通の汎用的なプログラム言語より大きいと思います。
(DSLは用途により沢山の言語があること)。

このため、図形言語でビジュアルプログラミングする効果が、用途が汎用的なプログラミング言語より出やすいと思います。

## 図形を扱う対象とする動機

2023年近辺のレトロブームの一部で、ごく初期のCGが取り上げられています。
当時は、レンダリング方法が素朴で、表示装置も低い解像度でした。
両方が進化した現在でも、素朴な段階のレンダリング方法にも魅力があり、これを今の表示装置で表示したいという動機があります。

## 「らららプログラミング」の仕様についての覚え書き

### 座標

- 画面の中央が (0, 0) です。
- 左上に (-1, -1)、右下に (1, 1) があります。
- 「グラフィックスの出力」ウィンドウやPNGファイルは 800×800 ドット (現状固定値) で、 x, y はそれぞれ 300 ドットに対応します。
- 線の太さは さらに 1/100 しています。

### 角度について (弧度法 vs 度数法)
円周上に点を並べたり、アフィン変換を作成するときの角度は以下のように取り扱います。
- 360°で一周
- 始点は12時の位置
- 時計回り

弧度法(ラジアン)でなく度数法(0°～360°)にしているのは、角度を数値で入力する場合ラジアンでは、例えば 1/3π( 1.047... ), 1/2π( 1.57... ), π, 2π 等は具体的な数値の指定がしづらく、60, 90, 180, 360 の方が指定しやすいためです。

### 固定精度整数の非サポートについて
固定精度の整数(8bit, 16bit, 32bit, 64bit, etc)はサポートしません。

昔は多倍長精度の整数は特殊なものでしたが(もともと基本的には固定精度の整数の取り扱いのみが存在し、多倍長精度は処理時間がかかる特殊なものでした)、いまは特にそういうこともないと思います。

固定精度整数と多倍長精度が両方使える処理系(システム)において、多倍長精度が必要ない場合は
固定精度整数を良く、そのメリットは計算速度やメモリ領域のオーバーヘッドです。

このプログラミング環境では元々(CやJavaをはじめとする通常のプログラミング言語と比べて)巨大なオーバーヘッドがあるため、
固定精度整数／多倍長精度の速度の違いを差を気にしても仕方がありません。

### 単精度浮動小数点の非サポートについて
固定精度の整数をサポートしないのと同一の理由で、倍精度浮動小数点(double精度)のみをサポートしています。

### 多倍長精度の小数について
多倍長精度での小数をサポートしていますが、図形関連は浮動小数点(double精度)で行っています。

### mod の返り値
剰余演算子(mod)は、常に正の数(または0)を返り値にします。
このため a / b = c あまり d としたときに、「 b * c + d == a 」は一般に成立しません。


### 変数名に使用可能な文字

変数名は半角の記号文字や空白を含むことはできません。
全角の文字に対する入力制限は特に行っていません(構文解析をしないこともあり)。
絵文字は現状の実装だと文字化けするようです。このため、事実上、変数名に絵文字等は使えません。

## 意識しないで済むようにしたいこと

### 低レイヤのあれこれ

- 2進数
- メモリ管理

など

### 作図をする場合の数学的知識のあれこれ

- 三角関数
- 行列

など

## 「まだ存在しない機能」
あっても良さそうだけれど、存在しない機能について記載します。

- 言語仕様
    - if文
        - if式はありますが(CやJavaの3項演算子に相当)、if文はありません。
        - (固定回数1回のループで break すれば同等のことはできますが)
- エディタ・実行環境
    - コピー&ペースト
    - UNDO
    - キーボードショートカット

# フローチャートについて

「フローチャートを書けばプログラミングになる」みたいなものかと言うと、すこし異なります。

(「箱が線でつながっている」という程度には類似しているけれど)

初期のプログラミング教育(1980年代、1990年代ごろ)で「まずフローチャートを書け」みたいに言う風潮がありましたが、
あまり良くなかったと考えています。

フローチャートは、プログラムの概要を他人に伝えるための道具です。
プログラムを書くとき、あらかじめどんなプログラムにすればいいか分かっていない段階で
フローチャートを書くのは順番が逆です。

つまり、実際のところ

手探りの段階・試行錯誤の段階

↓

フローチャート

↓

コーディング

のような過程をたどり、試行錯誤して分かってからフローチャートを書くのが素直です。
大昔(1970年代以前)と違いコンピューターは安価になったので、試行錯誤するための道具として、どんどんコンピューターを使うのが自然です。

余談ですが、「フローチャートを書け」と言う方は楽です。
すでにどんなプログラムか知っているからです。
「フローチャートを書け」と言う方は、試行錯誤しないからです。
( 初学者はフローチャートが書けないことに気付いていないため起こるできごとだと思います。 )


「らららプログラミング」は、手探りの段階・試行錯誤の段階を行うのと、
「かつてフローチャートに書かれていたことって何だっけ？」というのがあります。

一方で、プログラムを視覚的に定義し、文字などの何か別の表現に手作業で書き換えずに実行できるということは実現しています。


## これまでの簡易言語(習得が容易な言語)

簡易的な(習得の容易さを開発動機とした)プログラミング言語について、いくつかメモします。

(命令のプリミティブを機械よりのものではなく人間の知覚に近づけたものにすること、

またはCなどの低レイヤー言語で「プログラム」となるものが Tcl どでは「命令」であること、

日本語を使用可能にすることで「英語の壁」を取り除くこと、

実行に大袈裟な儀式を必要なくすること、

使うのに必要な「理解すべきこと」の量を減らすこと、等が、規範として見て取れます)

### 歴史的なもの

- Wikipeda の [LOGO](https://ja.wikipedia.org/wiki/LOGO) において、習得の容易さで知られる LOGO が記載されています。
- [忘れさられた言語LOGO](https://www.wizforest.com/OldGood/logo/)というWebページで、[Scratch](https://ja.wikipedia.org/wiki/Scratch_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E)) は LOGO の流れを汲むと記載されます。

- 1980年代の[ぴゅう太のG-BASIC](https://ja.wikipedia.org/wiki/%E3%81%B4%E3%82%85%E3%81%86%E5%A4%AA) (株式会社トミー) は、 BASIC の命令を日本語に逐語訳した日本語BASICとして注目されることがあります。

- Wikipedia の [簡易言語](https://ja.wikipedia.org/wiki/%E7%B0%A1%E6%98%93%E8%A8%80%E8%AA%9E) に 「1970～80年代に販売されていたビジネス向けアプリケーションのジャンル」としての「簡易言語」の説明があります。

- 主に商用で 1960年代ごろからの [4GL(第4世代言語)](https://ja.wikipedia.org/wiki/%E7%AC%AC%E5%9B%9B%E4%B8%96%E4%BB%A3%E8%A8%80%E8%AA%9E) が知られています。

- 同様に [RAD](https://ja.wikipedia.org/wiki/Rapid_Application_Development) も。

- Wikipedia の [軽量プログラミング言語](https://ja.wikipedia.org/wiki/%E8%BB%BD%E9%87%8F%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E) では Tcl や VBscript などが挙げられています。

### 比較的最近のもの

- 教育用プログラミング言語として、習得が容易なプログラミング言語「DNCL」についての記事 [DNCL学習環境「どんくり」](https://dolittle.eplang.jp/dncl) が知られています。

- qiitaの記事[「なでしこ」「プロデル」「Mind」三大日本語プログラミング言語を徹底解説](https://qiita.com/mylifewithviolin/items/3d366097847ae9c36de0) に習得が容易であることを特徴とする言語の説明があります。

- ゲームが開発可能なプログラミング言語として、 [Hot Soup Processor](https://ja.wikipedia.org/wiki/Hot_Soup_Processor) があります。 かつての BASIC の立ち位置に近いです。

- [【小学校プログラミング必修化】おすすめプログラミング言語5選](https://manabi-plus.jp/programming-language/) という記事では以下の5つのプログラミング言語が紹介されています。
	- Scratch
	- Viscuit
	- MOONBlock
	- LOOPIMAL
	- Google Blockly

- 日経XTECHに[初心者向けプログラミング・ツールに望まれること](https://xtech.nikkei.com/it/article/COLUMN/20071009/284029/)という記事があり、そこでは「初心者向けプログラミング・ツールに望まれること」として以下が挙げられています。
	- 比較的容易に目的を達成できる
	- プログラミング言語としての“スジ”がよい
	- 拡張性が高い
	- 安全性が高い
	- 学習するための環境が整っている

- 「動的幾何ソフト」の一種とする [Cinderella](https://sites.google.com/site/cinderellajapan/) があり、これも領域に特化されたプログラミング言語の一種です。

- 「高度なグラフ電卓」として、数学を対象領域とした [desmos](https://www.desmos.com/?lang=ja) があり、非常に機能が充実しています。


