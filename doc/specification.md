# ダイヤグラムによるプログラミングについての説明

## 概要

「らららプログラミング」は、先行評価、かつ、手続き型の簡易プログラミング言語です。
ちゃんとしたプログラミング言語([チューリング完全](https://ja.wikipedia.org/wiki/%E3%83%81%E3%83%A5%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%B0%E5%AE%8C%E5%85%A8)なプログラミング言語)ではありません。
言語についての細かなことをいくつか [ダイヤグラムによるプログラミング言語についての覚え書き](about_language.md) に記載しています。

## ファイル入出力

現時点で、ダイヤグラムでプログラミングされたプログラミング言語の中から、以下を呼び出すことはできません(機能を作成してません)。
- ファイルの入出力(ストレージへのアクセス)
- ネットワークへのアクセス

## データの型

データの型として以下があります。
- 数値
    - 整数(多倍長整数のみ)
    - 浮動小数点(倍精度のみ)
    - 任意精度の小数
- ブール値
- 文字列
- 点(座標)のリスト
- 線分(2点間を結ぶ線分)のリスト
- 2次元のアフィン変換(線形変換)
- 色情報

### 数値について

数値については、整数と実数を取り扱う型があります。
実数は2種類あり、浮動小数点によるものと、任意精度によるものがあります。

浮動小数点は、十進数で約16桁(15.9桁)の精度があり、絶対値で 10^(-300) から 10^300 の大きさの数が取り扱えます。
内部的にはJavaのdoubleを使用しています。
( [IEEE754のbinary64](https://ja.wikipedia.org/wiki/IEEE_754) や [倍精度浮動小数点数](https://ja.wikipedia.org/wiki/%E5%80%8D%E7%B2%BE%E5%BA%A6%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E6%95%B0) を参照してください )

整数は、JavaのBigInteger を使用しています。
公式のドキュメント https://docs.oracle.com/javase/jp/8/docs/api/java/math/BigInteger.html によると、扱える範囲は -(2^(2^31-1) - 1) から (2^(2^31-1) - 1) とのことです。
つまり、仕様上の限界値としては 十進数で 646,456,992.9桁になります( log10(2) × (2^31 - 1) 桁)。
全ての桁の精度があるため、桁数に比例してメモリーが必要になります。
起動するときのヒープメモリーの限界値に注意してください。

任意精度の小数は、JavaのBigDecimal を使用しています。
細かな話は https://docs.oracle.com/javase/jp/8/docs/api/java/math/BigDecimal.html を参照してください。

数値と数値の演算は、型が異なる場合は型変換を行います。
型変換の規則は以下です。
- 整数と任意精度の小数 → 任意精度の小数
- 整数と浮動小数点 → 浮動小数点
- 任意精度の小数と浮動小数点 → 浮動小数点

### 色情報について

32bit + 透過度8bit の情報を保持しています。

## 変数について

数や、演算子は値を持ちます。
値には変数名を割り当てることができます。
割り当てた変数名を使い、別の場所で値を取り出すことができます。
変数名には別の値を割り当てなおすことができます。

## パラメーターを定義する

プログラムを実行するときのパラメーター設定を定義することができます。
パラメーターは、プログラムの実行時に、変数の初期値として設定されます。
パラメーターの値が設定された変数は、書き換えが可能です。
データの型のうち、以下をパラメーターとすることができます(定数として直接できるもの)。

- 数値
    - 整数
    - 浮動小数点
    - 任意精度の小数
- ブール値
- 文字列

パラメーターは、パラメーター定義の一覧画面(以下の図)で追加することができます。
![パラメーター定義の一覧画面](./image/param_def_list_window.png "キャプチャ(パラメーター定義の一覧画面)")

「新しいパラメーターを追加」の文字をクリックするとパラメーターの定義画面が表示されます。
![パラメーターの定義画面](./image/param_def_window.png "キャプチャ(パラメーターの定義画面)")

以下を設定し、「これに決める」ボタンをクリックします。
- 変数名
- 説明
- 型
- デフォルト値

## プログラムを実行する

### 実行

プルダウンメニューから実行を選びます。
![「実行」ボタン](./image/excecute_button.png "キャプチャ(「実行」ボタン)")


### 実行時のパラメーター設定

パラメーターはプログラムの実行時に入力可能で、初期値としてパラメーター定義において指定されたデフォルト値が設定されています。
これを変化させると、それに応じて画面が変化します。




